{% extends "base.html" %}
{% block title %}Подтверждение сотрудников{% endblock %}
{% block content %}

<div class="container py-4" style="max-width: 900px;">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-white m-0">Подтверждение сотрудников</h2>
    <a class="btn btn-light-soft" href="{{ url_for('admin_dashboard') }}"><i class="bi bi-arrow-left"></i> Назад</a>
  </div>

  {% for u in rows %}
  <div class="card card-premium mb-3">
    <div class="card-body d-flex flex-column flex-md-row justify-content-between gap-3">

      <div>
        <div class="fw-semibold fs-5">{{ u["full_name"] }}</div>
        <div class="text-muted small">{{ u["email"] }}</div>

        {% if u["approved"] == 0 %}
          <span class="badge badge-soft badge-review mt-2">Ожидает подтверждения</span>
        {% else %}
          <span class="badge badge-soft badge-accepted mt-2">Подтверждён</span>
        {% endif %}
      </div>

      {% if u["approved"] == 0 %}
      <div class="d-flex gap-2 align-items-center">
        <form method="post" action="{{ url_for('admin_staff_approve', user_id=u['id']) }}">
          <button class="btn btn-success-soft">✅ Подтвердить</button>
        </form>

        <form method="post" action="{{ url_for('admin_staff_reject', user_id=u['id']) }}">
          <input type="password" name="confirm_code" class="form-control mb-2"
                 placeholder="Код (0309)" required>
          <button class="btn btn-danger-soft">❌ Отклонить</button>
        </form>
      </div>
      {% endif %}

    </div>
  </div>
  {% else %}
    <div class="text-center text-muted">Нет сотрудников для подтверждения</div>
  {% endfor %}
</div>

{% endblock %}