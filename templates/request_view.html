{% extends "base.html" %}
{% block title %}Заявления{% endblock %}
{% block content %}

<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Заявление #{{ r["id"] }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-5">
  <div class="bg-white p-4 rounded shadow-sm">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h1 class="h5 m-0">Заявление #{{ r["id"] }}</h1>
      <a class="btn btn-secondary btn-sm" href="/admin/requests">Назад</a>
    </div>

    <div class="row g-3">
      <div class="col-md-6">
        <div class="text-muted small">Студент</div>
        <div class="fw-semibold">{{ r["full_name"] }}</div>
      </div>
      <div class="col-md-3">
        <div class="text-muted small">Тип</div>
        <div class="fw-semibold">{{ r["req_type"] }}</div>
      </div>
      <div class="col-md-3">
        <div class="text-muted small">Дата</div>
        <div class="fw-semibold">{{ r["created_at"][:10] }}</div>
      </div>
    </div>

    <hr>

    <div class="mb-2 text-muted small">Заголовок</div>
    <div class="fw-semibold mb-3">{{ r["title"] }}</div>

    <div class="mb-2 text-muted small">Текст</div>
    <div class="border rounded p-3 bg-light">{{ r["body_text"] }}</div>

    <hr>

    <div class="mb-2">
      <span class="text-muted small">Текущий статус:</span>
      <span class="fw-semibold">
        {% if r["status"] == "review" %}На рассмотрении{% endif %}
        {% if r["status"] == "accepted" %}Принято{% endif %}
        {% if r["status"] == "returned" %}Возвращено{% endif %}
      </span>
    </div>

    <div class="d-flex gap-2 flex-wrap">
      <form method="post" action="/admin/request/{{ r['id'] }}/status/accepted">
        <button class="btn btn-success">Принять</button>
      </form>

      <form method="post" action="/admin/request/{{ r['id'] }}/status/returned">
        <button class="btn btn-warning">Вернуть</button>
      </form>

      <form method="post" action="/admin/request/{{ r['id'] }}/status/review">
        <button class="btn btn-outline-secondary">На рассмотрение</button>
      </form>
    </div>
  </div>
</div>

</body>
</html>

{% endblock %}